<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments/header :: head(title='Students')"></head>
  <body>
    <div th:replace="fragments/header :: body"></div>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="text-primary">Students</h2>
      <a class="btn btn-primary" th:href="@{/students/new}">âž• Add Student</a>
    </div>

    <table class="table table-striped table-bordered shadow-sm">
      <thead class="table-dark">
        <tr><th>Name</th><th>Email</th><th>Department</th><th>Enrolled</th><th>Actions</th></tr>
      </thead>
      <tbody>
      <tr th:each="s : ${students}">
        <td th:text="${s.name}"></td>
        <td th:text="${s.email}"></td>
        <td th:text="${s.department}"></td>
        <td th:text="${s.courses.size()}"></td>
        <td>
          <a th:href="@{'/students/' + ${s.id}}" class="btn btn-info btn-sm">View</a>
          <a th:href="@{'/students/edit/' + ${s.id}}" class="btn btn-warning btn-sm">Edit</a>
          <a th:href="@{'/students/delete/' + ${s.id}}" class="btn btn-danger btn-sm"
             onclick="return confirm('Delete student?')">Delete</a>
          <a th:href="@{'/students/' + ${s.id} + '/enroll'}" class="btn btn-secondary btn-sm">Enroll</a>
        </td>
      </tr>
      </tbody>
    </table>

    </div> <!-- .container from header -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>